<!DOCTYPE html>
<html lang="zxx">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="./assets/img/basic/favicon.ico" type="image/x-icon">
	<title>XVI Victoria</title>
	<!-- CSS -->
	<link rel="stylesheet" href="./assets/css/app.css">
	<link rel="stylesheet" href="./assets/css/loading.css">
	<link rel="stylesheet" href="./assets/css/style.css?ver=1.0.8">

	<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
	<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body class="sidebar-mini sidebar-collapse theme-dark  sidebar-expanded-on-hover has-preloader" style="display: none;">
	<!-- Pre loader
  To disable preloader remove 'has-preloader' from body
 -->
	<div id="loader" class="loader">
		<div class="loader-container">
			<div class="preloader-wrapper big active">
				<div class="spinner-layer spinner-blue">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div>
					<div class="gap-patch">
						<div class="circle"></div>
					</div>
					<div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>

				<div class="spinner-layer spinner-red">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div>
					<div class="gap-patch">
						<div class="circle"></div>
					</div>
					<div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>

				<div class="spinner-layer spinner-yellow">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div>
					<div class="gap-patch">
						<div class="circle"></div>
					</div>
					<div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>

				<div class="spinner-layer spinner-green">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div>
					<div class="gap-patch">
						<div class="circle"></div>
					</div>
					<div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Loader -->
	<div class="preloader">
		<div class="status">
			<lottie-player src="./assets/json/invitacion2.json" background="transparent" speed="1"
				style="width: 400px; height: 400px;" loop autoplay></lottie-player>
		</div>
	</div>

	<div class="preloader2" style="display: none">
		<div class="status2" style="width: 100%">
			<lottie-player src="./assets/json/confeti.json" background="transparent" speed="1"
				style="width: 100%; height: 100%;" loop autoplay></lottie-player>
		</div>
	</div>
	<!-- End loader -->

	<!-- @Pre loader-->
	<div id="rekord-app">


		<aside class="main-sidebar fixed offcanvas shadow" data-toggle='offcanvas'>
			<div class="sidebar">
				<ul class="sidebar-menu">
					<li><a class="ajaxifyPage active" href="#inicio">
							<i class="icon-home s-24 mr-2"></i> <span> Inicio</span>
						</a>
					</li>
					<li><a class="ajaxifyPage" href="#invitacion">
							<i class="icon-qrcode  s-24 mr-2"></i> <span> Invitación</span>
						</a>
					<li>
					<li><a class="ajaxifyPage" href="#direccion">
							<i class="icon-map-marker s-24 mr-2"></i> <span> Dirección</span>
						</a>
					<li>
				</ul>
			</div>
		</aside>
		<!--Sidebar End-->

		<!-- Right Sidebar -->
		<aside class="control-sidebar fixed ">
			<div class="slimScroll">
				<div class="sidebar-header">
					<h4>PlayList</h4>
					<p>Awesome Collection for you</p>
					<a href="#" data-toggle="control-sidebar" class="paper-nav-toggle  active"><i></i></a>
				</div>
				<div class="p-3">
					<ul id="playlist" class="playlist list-group">
						<li class="list-group-item my-1">
							<a class="no-ajaxy media-url" href="./assets/media/track1.mp3"
								data-wave="./assets/media/track1.json">
								<div class="d-flex justify-content-between align-items-center">
									<i class="icon-play s-28"></i>
									<figure class="avatar-md float-left mr-3 mt-1">
										<img class="r-5" src="./assets/img/demo/a1.jpg" alt="">
									</figure>
									<div>
										<h6>alexander Pierce</h6>Atif Aslam
									</div>
									<span class="badge badge-primary badge-pill"> 5:03</span>
								</div>
							</a>
						</li>
						<li class="list-group-item my-1">
							<a class="no-ajaxy media-url" href="./assets/media/track2.mp3"
								data-wave="./assets/media/track2.json">
								<div class="d-flex justify-content-between align-items-center">
									<i class="icon-play s-28"></i>
									<figure class="avatar-md float-left mr-3 mt-1">
										<img class="r-5" src="./assets/img/demo/a2.jpg" alt="">
									</figure>
									<div>
										<h6>alexander Pierce</h6>Atif Aslam
									</div>
									<span class="badge badge-primary badge-pill"> 5:03</span>
								</div>
							</a>
						</li>
						<li class="list-group-item my-1">
							<a class="no-ajaxy media-url" href="./assets/media/track3.mp3"
								data-wave="./assets/media/track3.json">
								<div class="d-flex justify-content-between align-items-center">
									<i class="icon-play s-28"></i>
									<figure class="avatar-md float-left mr-3 mt-1">
										<img class="r-5" src="./assets/img/demo/a4.jpg" alt="">
									</figure>
									<div>
										<h6>alexander Pierce</h6>Atif Aslam
									</div>
									<span class="badge badge-primary badge-pill"> 5:03</span>
								</div>
							</a>
						</li>

						<li class="list-group-item my-1">
							<a class="no-ajaxy media-url" href="./assets/media/track1.mp3"
								data-wave="./assets/media/track1.json">
								<div class="d-flex justify-content-between align-items-center">
									<i class="icon-play s-28"></i>
									<figure class="avatar-md float-left mr-3 mt-1">
										<img class="r-5" src="./assets/img/demo/a5.jpg" alt="">
									</figure>
									<div>
										<h6>alexander Pierce</h6>Atif Aslam
									</div>
									<span class="badge badge-primary badge-pill"> 5:03</span>
								</div>
							</a>
						</li>

						<li class="list-group-item my-1">
							<a class="no-ajaxy media-url" href="./assets/media/track2.mp3"
								data-wave="./assets/media/track2.json">
								<div class="d-flex justify-content-between align-items-center">
									<i class="icon-play s-28"></i>
									<figure class="avatar-md float-left mr-3 mt-1">
										<img class="r-5" src="./assets/img/demo/a6.jpg" alt="">
									</figure>
									<div>
										<h6>alexander Pierce</h6>Atif Aslam
									</div>
									<span class="badge badge-primary badge-pill"> 5:03</span>
								</div>
							</a>
						</li>


					</ul>

				</div>
			</div>
		</aside>
		<!-- /.right-sidebar -->
		<!-- Add the sidebar's background. This div must be placed
         immediately after the control sidebar -->
		<div class="control-sidebar-bg shadow  fixed"></div>

		<svg class="d-none">
			<defs>
				<symbol id="icon-cross" viewBox="0 0 24 24">
					<title>cross</title>
					<path
						d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
				</symbol>
			</defs>
		</svg>



		<!--navbar-->
		<nav class="navbar-wrapper navbar-bottom-fixed shadow">
			<div class="navbar navbar-expand player-header justify-content-between  bd-navbar">
				<div class="d-flex align-items-center">
					<a href="#" data-toggle="push-menu"
						class="paper-nav-toggle pp-nav-toggle  paper-nav-toggle-sidenav ml-2 mr-2">
						<i></i>
					</a>
					<a class="navbar-brand d-none d-lg-block" href="index.html">
						<div class="d-flex align-items-center s-14 l-s-2">
							<span>By Daniel Uribe</span>
						</div>
					</a>
				</div>
				<!--Player-->
				<div id="mediaPlayer" class="player-bar col-lg-8 col-md-5" data-auto="true">
					<div class="row align-items-center grid">
						<div class="col">
							<div class="d-flex align-items-center">
								<!-- <button id="previousTrack" class="btn btn-link d-none d-sm-block">
									<i class="icon-back s-18"></i>
								</button> -->
								<button class=" btn btn-link" id="playPause">
									<span id="play"><i class="icon-play s-36"></i></span>
									<span id="pause" style="display: none"><i
											class="icon-pause s-36 text-primary"></i></span>
								</button>
								<!-- <button id="nextTrack" class="btn btn-link d-none d-sm-block">
									<i class="icon-next s-18"></i>
								</button> -->
							</div>
						</div>
						<div class="col-8 d-none d-lg-block">
							<div id="waveform"></div>
						</div>

					</div>

				</div>
				<!--@Player-->
				<!--Top Menu Start -->
				<div class="navbar-custom-menu">
					<ul class="nav navbar-nav">

						<!-- Right Sidebar Toggle Button -->

						<!-- User Account-->
						<li class="dropup custom-dropdown user user-menu ">
							<a href="#" class="nav-link" data-toggle="dropdown">
								<figure class="avatar">
									<img src="./assets/img/demo/vico6.jpeg" alt="">
								</figure>
								<i class="icon-more_vert "></i>
							</a>

						</li>
					</ul>
				</div>
			</div>

		</nav>
		<!--Page Content-->
		<main id="pageContent" class="page has-sidebar">
			<div class="container-fluid relative animatedParent animateOnce no-p">
				<div class="animated fadeInUpShort">
					<!--Banner Slider-->
					<section id="#inicio">
						<div class="text-white">
							<div class="lightSlider" data-item="1" data-controls="true" data-slide-margin="0"
								data-gallery="false" data-pause="8000" data-pauseonhover="true" data-auto="false"
								data-pager="false" data-loop="true">

								<div class="xv-slide" data-bg-possition="center"
									style="background-image:url('assets/img/demo/vico6.jpeg'); filter: opacity(0.5);">

									<div class="wrapper has-bottom-gradient">
										<div class="p-md-5 p-3">
											<div class="row">
												<div class="col-12 col-lg-12 fadeInRight animated">
													<div class="xv-slider-content clearfix color-white">
														<h1 class="s-64 mt-5 font-weight-lighter"
															style="font-weight: 400 !important;">Invitación para:</h1>
														<p class="s-48 font-weight-lighter text-capitalize"
															id="familiar"
															style="font-weight: 300 !important;text-transform: capitalize !important;">
														</p>
														<div class="pt-3">
															<a href="#invitacion" class="btn btn-primary btn-lg">Ver
																invitación</a>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="bottom-gradient"></div>
								</div>
							</div>
						</div>
						<!--slider Wrap-->
					</section>
					<!--@Banner Slider-->
					<div class="wrapper p-md-5 p-3">



						<!--PlayList & Events-->
						<section class="section mt-4">
							<div class="row row-eq-height">
								<div class="col-lg-8" id="invitacion">
									<div class="card no-b mb-md-3 p-2">
										<div class="card-header no-bg transparent">
											<div class="d-flex justify-content-between">
												<div class="align-self-center">
													<div class="d-flex">
														<!--<i class="icon-music s-36 mr-3  mt-2"></i>-->
														<div>


														</div>
													</div>

												</div>

											</div>
										</div>
										<div class="card-body no-p">
											<h4 class="text-center font-cursive">Hoy, hace dieciséis años mis padres
												daban
												gracias a Dios
												por
												mi. Hoy doy gracias a Dios por ellos, por cuidarme y
												guiarme.
											</h4>
											<h4 class="text-center font-cursive mt-4">
												Doy gracias también a mis hermanas por ser mis leales
												compañeras, las amo.</h4>
											<h4 class="text-center font-cursive mt-4">
												Y a mis amig@s por enseñarme el valor de la amistad.
											</h4>
											<h4 class="text-center font-cursive mt-4">
												A mis familiares por hacer más especial este día.
											</h4>
											<h4 class="text-center text-primary2 font-cursive mt-4">
												Te invito a ti y a tu apreciable familia a celebrar
												conmigo.
											</h4>
											<h4 class="text-center text-primary2 font-cursive mt-4">
												El viernes 26 de noviembre del 2021
												a partir de las 8:30 pm.
											</h4>
											<h4 class="text-center text-primary2 font-cursive mt-4">
												¡No olvides llevar tu cubrebocas!</h4>
											<h4 class="text-center text-primary2 font-cursive mt-4">
												¡Recuerda presentar tu Qr de esta invitación en la entrada!</h4>
										</div>
									</div>
									<div class="card no-b mb-md-3 p-2 mt-3" id="confirmar_invitacion">
										<div class="card-header no-bg transparent">
											<div class="d-flex justify-content-between">
												<div class="align-self-center">
													<div class="d-flex">
														<!--<i class="icon-music s-36 mr-3  mt-2"></i>-->
														<div>


														</div>
													</div>

												</div>

											</div>
										</div>
										<div class="card-body no-p">
											<div class="d-flex align-items-center justify-content-center">
												<lottie-player src="./assets/json/party2.json" background="transparent"
													speed="1" style="width: 250px;height: auto;margin-top: -7%;" loop
													autoplay>
												</lottie-player>
											</div>
											<div class="d-flex align-items-center justify-content-center mb-2">
												<a class="btn btn-primary btn-lg"
													id="confirmar_invitacion_btn">Confirmar
													asistencia</a>
											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-4 mt-lg-0 mt-md-3 mt-3">
									<div class="mb-3 card p-3">
										<div>
											<div>
												<div>
													<a>
														<h4 class="text-primary">Pases y número de mesa</h4>
													</a>
												</div>
												<!-- <small> 33 Cliveden Close, Melbourne VIC 3000, Australia</small> -->
											</div>
											<div class="mr-3 float-left text-center">
												<div class="s-36" id="adultos"></div>
												<span>Adultos</span>
											</div>
											<div class="mr-3 float-left text-center">
												<div class="s-36" id="ninos"></div>
												<span>Niños</span>
											</div>
											<div class="mr-3 float-left text-center">
												<div class="s-36" id="mesa"></div>
												<span>Mesa</span>
											</div>
										</div>
									</div>
									<div class="mb-3 card p-3">
										<div>
											<div>
												<div id="invitaccion">
													<a>
														<h4 class="text-primary">Qr invitación</h4>
													</a>
												</div>
												<div class="mt-3 d-flex align-items-center justify-content-center"
													id="qr">

												</div>
											</div>
										</div>

									</div>
									<div class="mb-3 card">
										<figure class="card-img figure">
											<div class="img-wrapper">
												<lottie-player src="./assets/json/confeti.json" background="transparent"
													speed="1" style="width: 100%; height: 100%;" loop autoplay>
												</lottie-player>
											</div>
											<div class="img-overlay text-white">
												<div class="figcaption">
												</div>
											</div>
											<div class="has-bottom-gradient">
												<div class="d-flex">
													<div class="card-img-overlay">
														<div>
															<div class="mr-3 float-left text-center">
																<div class="s-36">26</div>
																<span>Nov</span>
															</div>
															<div>
																<div>
																	<a>
																		<h4 class="text-primary">XVI AÑOS</h4>
																	</a>
																</div>
																<strong class="ft-1r"> Quinta El Ciervo, Camelina 168,
																	La Camelina,
																	58087 Morelia, Mich.</strong>
																<div class="mt-2">
																	<i class="icon-clock-o mr-1"> </i><strong
																		class="ft-1r"> 8:30 PM</strong>
																</div>
															</div>

														</div>
													</div>
												</div>
											</div>
										</figure>
										<div class="bottom-gradient"></div>
									</div>
								</div>
							</div>
						</section>
						<!--@PlayLIst & Events-->

						<!--Recommend-->
						<section class="section" id="direccion">
							<div class="d-flex relative align-items-center justify-content-between">
								<div class="mb-4">
									<h4>Dirección</h4>
								</div>

							</div>
							<div class="mb-3" id="map"></div>

						</section>
						<!--@Recommend-->

					</div>
				</div>
			</div>
		</main>
		<!--@Page Content-->
	</div>
	<!--@#rekord-app-->
	<!--/#rekord-app -->

	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhHV1Cv43QFw92rbIJIqpVczFDrxOyxW4&callback=initMap&v=weekly"
		async></script>

	<!-- <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script> -->
	<script src="./assets/js/app.js"></script>
	<script src="./assets/js/map.js"></script>
	<script src="./assets/js/loading.js"></script>
	<script src="./assets/js/conexion.js?ver=1.0.8" type="module"></script>

	<script type="module">
		import { collection, query, getFirestore, doc, onSnapshot, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js";
		const db = getFirestore();
		//Consultas

		var invitacionParam = 'ExmDLFAM.URIBEGARCIAFERREYRAZS1hF';

		const consulta = doc(db, "col-invitaciones", invitacionParam);
		const validar = await getDoc(consulta);


		if (!validar.exists()) {

			console.log("Invitación fake");
		}

		const invitacion = onSnapshot(
			doc(db, "col-invitaciones", invitacionParam),
			{ includeMetadataChanges: true },
			(doc) => {
				const familiar = document.querySelector('#familiar');
				const adultos = document.querySelector('#adultos');
				const ninos = document.querySelector('#ninos');
				const mesa = document.querySelector('#mesa');
				const qr = document.querySelector('#qr');

				familiar.innerHTML = `${doc.data().familia}`;
				adultos.innerHTML = `${doc.data().adultos}`;
				ninos.innerHTML = `${doc.data().ninos}`;
				mesa.innerHTML = `${doc.data().mesa}`;
				qr.innerHTML = `<img class="img-fluid img-qr" src="${doc.data().code}" />`;

				if (doc.data().asistencia == 'false' || doc.data().asistencia == 'true') {
					document.querySelector('#confirmar_invitacion').classList.remove('mostrar');
					document.querySelector('#confirmar_invitacion').classList.add('ocultar');
				} else {
					document.querySelector('#confirmar_invitacion').classList.remove('ocultar');
					document.querySelector('#confirmar_invitacion').classList.add('mostrar');

				}
			});

		const boton = document.querySelector("#confirmar_invitacion_btn");

		boton.addEventListener("click", function (e) {
			registrarInvitaciones();
		});

		function registrarInvitaciones() {
			Swal.fire({
				title: '',
				text: "¿Podras asistir este 26 de noviembre a los XVI años?",
				imageUrl: 'https://firebasestorage.googleapis.com/v0/b/victoria-637cb.appspot.com/o/29774-dance-party.gif?alt=media&token=13b47e57-c24a-4d4b-bf1b-3cf552275402',
				imageWidth: 300,
				imageHeight: 300,
				imageAlt: 'Custom image',
				showCloseButton: true,
				showCancelButton: false,
				showDenyButton: true,
				confirmButtonColor: '#3085d6',
				denyButtonColor: '#ff1744',
				confirmButtonText: 'Si asistire',
				denyButtonText: `No asistire`,
			}).then((result) => {
				if (result.isConfirmed) {
					updateAsistencia('true');

				} else if (result.isDenied) {
					updateAsistencia('false');
				}
			})

		}
		async function updateAsistencia(value) {
			const documento = doc(db, "col-invitaciones", invitacionParam);
			if (value == 'true') {
				await updateDoc(documento, {
					asistencia: 'true'
				}).then(function () {
					Swal.fire({
						title: "Genial 🎉",
						text: "Te esperamos el viernes 26 de septiembre del 2021 a partir de las 8:30 pm 🍻",
						imageUrl: "https://firebasestorage.googleapis.com/v0/b/victoria-637cb.appspot.com/o/11272-party-popper.gif?alt=media&token=4c1d7634-b711-4613-a80a-f7e95cf23729",
						imageWidth: 200,
						imageHeight: 200,
						imageAlt: "Custom image",
						confirmButtonText: "👍🏻",
					});
				});
			} else {
				await updateDoc(documento, {
					asistencia: 'false'
				}).then(function () {
					Swal.fire({
						title: "😕",
						text: "Lamentamos que no nos puedan acompañar, ya será en otra ocasión",
						imageUrl: "https://firebasestorage.googleapis.com/v0/b/victoria-637cb.appspot.com/o/26184-sad-star.gif?alt=media&token=846ad997-595a-4e53-95fc-0960d9c19814",
						imageWidth: 200,
						imageHeight: 200,
						imageAlt: "Custom image",
						confirmButtonText: "Aceptar",
					});
				});
			}
		}


	</script>


</body>

</html>